OCE_Federal_collapse_trigger = {
    news_event = { id = OCE.10 days = 0 }
}
OCE_pie_chart_type = {
  clear_variable = OCE_factory
  set_variable = { OCE_gross_domestic_product = 0 } #生产总值初始
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@oil }
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@aluminium }
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@rubber }
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@tungsten }
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@steel }
	add_to_variable = { OCE_gross_domestic_product = ROOT.resource_produced@chromium }
    
  add_to_variable = { OCE_factory = ROOT.num_of_naval_factories } 
  add_to_variable = { OCE_factory = ROOT.num_of_civilian_factories } 
  add_to_variable = { OCE_factory = ROOT.num_of_military_factories } 
  multiply_variable = { OCE_factory = 10 } 
  add_to_variable = { OCE_gross_domestic_product = OCE_factory }
  add_to_variable = { OCE_gross_domestic_product = OCE_gross_domestic_product_additional }#生产总值
  

  clear_variable = total_resource
  add_to_variable = { total_resource = OCE_gross_domestic_product }
  

  set_variable = { OCE_air_force_production_pie = OCE_air_force_production }
	divide_variable = { OCE_air_force_production_pie = total_resource }
	multiply_variable = { OCE_air_force_production_pie = 100 }
	round_variable = OCE_air_force_production_pie

  set_variable = { OCE_army_production_pie = OCE_army_production }
	divide_variable = { OCE_army_production_pie = total_resource }
	multiply_variable = { OCE_army_production_pie = 100 }
	round_variable = OCE_army_production_pie
  add_to_variable = { OCE_army_production_pie = OCE_air_force_production_pie }

  set_variable = { OCE_life_consumption_pie = OCE_life_consumption }
	divide_variable = { OCE_life_consumption_pie = total_resource }
	multiply_variable = { OCE_life_consumption_pie = 100 }
	round_variable = OCE_life_consumption_pie
  add_to_variable = { OCE_life_consumption_pie = OCE_army_production_pie }

  set_variable = { OCE_navy_production_pie = OCE_navy_production }
	divide_variable = { OCE_navy_production_pie = total_resource }
	multiply_variable = { OCE_navy_production_pie = 100 }
	round_variable = OCE_navy_production_pie
  add_to_variable = { OCE_navy_production_pie = OCE_life_consumption_pie }

  set_variable = { OCE_other_expenses_pie = OCE_other_expenses }
	divide_variable = { OCE_other_expenses_pie = total_resource }
	multiply_variable = { OCE_other_expenses_pie = 100 }
	round_variable = OCE_other_expenses_pie
  add_to_variable = { OCE_other_expenses_pie = OCE_navy_production_pie }

  set_variable = { OCE_scientific_expenses_pie = OCE_scientific_expenses }
	divide_variable = { OCE_scientific_expenses_pie = total_resource }
	multiply_variable = { OCE_scientific_expenses_pie = 100 }
	round_variable = OCE_scientific_expenses_pie
  add_to_variable = { OCE_scientific_expenses_pie = OCE_other_expenses_pie }
}

OCE_Extreme = {
	add_to_variable = { OCE_paranoia_main_paranoiameter = 3 } 
	OCE_Extreme_100_0 = yes
}
OCE_Extreme_100_0 = {
	if = {
        limit = {
            check_variable = {OCE_paranoia_main_paranoiameter < 0}
        }
        set_variable = {OCE_paranoia_main_paranoiameter = 0}
    }
    if = {
        limit = {
            check_variable = {OCE_paranoia_main_paranoiameter > 100}
        }
       set_variable = {OCE_paranoia_main_paranoiameter = 100}
    }
}

OCE_purge_character_effect = { #Expected to be called in the character scope
	PREV = { retire_character = PREV }
	OCE_paranoia_medium_decrease_effect = yes
}

OCE_trigger_regular_purge_admiral_accused_effect = {
	random_navy_leader = {
		limit = {
			NOT = {
				has_character_flag = OCE_targeted_for_purge_flag
			}
		}
		set_character_flag = OCE_targeted_for_purge_flag
		ROOT = { set_variable = { OCE_purged_character_for_loc = PREV } }	
	}
	
	var:OCE_purged_character_for_loc = { unit_leader_event = OCE_paranoia_system_events.31 } # TRIGGER EVENT
}

OCE_regular_purge_general_accused_effect = {
	
	random_army_leader = {
		limit = {
			NOT = {
				has_trait = OCE_fear_osia
				has_character_flag = OCE_targeted_for_purge_flag
				has_character_flag = OCE_targeted_for_purge_flag_no
			}
		}
		set_character_flag = OCE_targeted_for_purge_flag

		ROOT = { set_variable = { OCE_purged_character_for_loc = PREV } }
		ROOT = { log = "This is [THIS.GetName] // PREV is [PREV.GetName] // ROOT is [ROOT.GetName] // VAR is [?ROOT.OCE_purged_character_for_loc.GetName]" }
	}

	var:OCE_purged_character_for_loc = { unit_leader_event = OCE_paranoia_system_events.21 } # TRIGGER EVENT
}

OCE_paranoia_medium_decrease_effect = {
	add_to_variable = { OCE_paranoia_main_paranoiameter = -8 } 
	OCE_Extreme_100_0 = yes
}